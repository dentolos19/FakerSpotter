@page "/intro"

<Animate Animation="Animations.Fade" Duration="TimeSpan.FromSeconds(2)">
    <Title Size="3" TextAlignment="TextAlignment.Center">Intro</Title>
    <Divider/>
    <MarkdownPanel Content="@MarkdownContent"/>
    <Paragraph TextAlignment="TextAlignment.Center">
        <Button Color="Color.Primary" Clicked="OnContinue">Play</Button>
    </Paragraph>
</Animate>

@code
{

    [Inject] private IAnalytics Analytics { get; set; }
    [Inject] private NavigationManager NavigationManager { get; set; }
    [Inject] private HttpClient HttpClient { get; set; }

    private string MarkdownContent { get; set; }

    protected override async Task OnInitializedAsync()
    {
        MarkdownContent = await HttpClient.GetStringAsync("data/intro.md");
    }

    private void OnContinue()
    {
        Analytics.TrackEvent("game_played");
        if (UserSettings.IsRoomOneCompleted != true)
        {
            NavigationManager.NavigateTo("room1");
        }
        else if (UserSettings.IsRoomTwoCompleted != true)
        {
            NavigationManager.NavigateTo("room2");
        }
        else if (UserSettings.IsRoomThreeCompleted != true)
        {
            NavigationManager.NavigateTo("room3");
        }
        else
        {
            NavigationManager.NavigateTo("finish");
        }
    }

}